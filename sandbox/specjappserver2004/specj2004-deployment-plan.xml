<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://geronimo.apache.org/xml/ns/j2ee/application"
    configId="SPECjAppServer" parentId="SPECjAppServerJMS">

<!--    parentId="org/apache/geronimo/Server"> -->

    <module>
        <web>web.war</web>
        <web-app xmlns="http://geronimo.apache.org/xml/ns/web"
            configId="Web" parentId="SPECjAppServer">
            <context-priority-classloader>false</context-priority-classloader>
        </web-app>
    </module>

    <module>
        <ejb>corp.jar</ejb>
        <openejb-jar xmlns="http://www.openejb.org/xml/ns/openejb-jar"
            configId="CORPEJB" parentId="SPECjAppServer">
            <cmp-connection-factory>
                <resource-link>SPEC</resource-link>
            </cmp-connection-factory>
            <enterprise-beans>
                <session>
                    <ejb-name>CustomerSes</ejb-name>
                    <jndi-name>ejb/CustomerSes</jndi-name>
                </session>
                <session>
                    <ejb-name>CorpAuditSes</ejb-name>
			        <jndi-name>ejb/CorpAuditSes</jndi-name>
			        <resource-ref>
			        	<!--<res-ref-name>CorpDataSource</res-ref-name>
			        	<jndi-name>jdbc/SPEC</jndi-name>-->
			        	<ref-name>jdbc/SPEC</ref-name>
                		<resource-link>CorpDataSource</resource-link>
			      </resource-ref>
                </session>
                <entity>
                    <ejb-name>CustomerInventoryEnt</ejb-name>
				    <table-name>C_CUSTOMERINVENTORY</table-name>
				    <cmp-field-mapping>
				    	<cmp-field-name>customerId</cmp-field-name>
				        <table-column>CI_CUSTOMERID</table-column>
				    </cmp-field-mapping>
				    <cmp-field-mapping>
				        <cmp-field-name>value</cmp-field-name>
				        <table-column>CI_VALUE</table-column>
				    </cmp-field-mapping>
				    <cmp-field-mapping>
				        <cmp-field-name>itemId</cmp-field-name>
				        <table-column>CI_ITEMID</table-column>
				    </cmp-field-mapping>
				    <cmp-field-mapping>
				        <cmp-field-name>id</cmp-field-name>
				        <table-column>CI_ID</table-column>
				    </cmp-field-mapping>
				    <cmp-field-mapping>
				        <cmp-field-name>quantity</cmp-field-name>
				        <table-column>CI_QUANTITY</table-column>
				    </cmp-field-mapping>
                </entity>

                <entity>
                    <ejb-name>CustomerEnt</ejb-name>
					<table-name>C_CUSTOMER</table-name>
					<cmp-field-mapping>
						<cmp-field-name>contact</cmp-field-name>
						<table-column>C_CONTACT</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>creditLimit</cmp-field-name>
						<table-column>C_CREDIT_LIMIT</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>state</cmp-field-name>
						<table-column>C_STATE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>zip</cmp-field-name>
						<table-column>C_ZIP</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>phone</cmp-field-name>
						<table-column>C_PHONE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>credit</cmp-field-name>
						<table-column>C_CREDIT</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>since</cmp-field-name>
						<table-column>C_SINCE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>ytdPayment</cmp-field-name>
						<table-column>C_YTD_PAYMENT</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>street1</cmp-field-name>
						<table-column>C_STREET1</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>balance</cmp-field-name>
						<table-column>C_BALANCE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>firstName</cmp-field-name>
						<table-column>C_FIRST</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>lastName</cmp-field-name>
						<table-column>C_LAST</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>street2</cmp-field-name>
						<table-column>C_STREET2</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>country</cmp-field-name>
						<table-column>C_COUNTRY</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>city</cmp-field-name>
						<table-column>C_CITY</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>customerId</cmp-field-name>
						<table-column>C_ID</table-column>
					</cmp-field-mapping>
                </entity>
            </enterprise-beans>

            <relationships>
                <ejb-relation>
                    <ejb-relation-name>CustomerEnt-CustomerInventoryEnt</ejb-relation-name>
                    <ejb-relationship-role>
                        <ejb-relationship-role-name>customerent</ejb-relationship-role-name>
                        <relationship-role-source>
                            <ejb-name>CustomerInventoryEnt</ejb-name>
                        </relationship-role-source>
                        <cmr-field>
                            <cmr-field-name>customer</cmr-field-name>
                        </cmr-field>
                        <foreign-key-column-on-source/>
                        <role-mapping>
                            <cmr-field-mapping>
                                <key-column>C_ID</key-column>
                                <foreign-key-column>CI_CUSTOMERID</foreign-key-column>
                            </cmr-field-mapping>
                        </role-mapping>
                    </ejb-relationship-role>
                </ejb-relation>    
            </relationships>
        </openejb-jar>
    </module>
    
    <module>
        <ejb>orders.jar</ejb>
        <openejb-jar xmlns="http://www.openejb.org/xml/ns/openejb-jar"
            configId="ORDERSEJB" parentId="SPECjAppServer">
            <cmp-connection-factory>
                <resource-link>SPEC</resource-link>
            </cmp-connection-factory>
            <enterprise-beans>
                <session>
                    <ejb-name>OrderSes</ejb-name>
                    <jndi-name>ejb/OrderSes</jndi-name>
                    <resource-ref>
                       <ref-name>jms/QueueConnectionFactory</ref-name>
                       <resource-link>SPECConnectionFactory</resource-link>
                    </resource-ref>
					<resource-env-ref>
                       <ref-name>jms/LargeOrderQueue</ref-name>
                       <message-destination-link>LargeOrderQueue</message-destination-link>
                    </resource-env-ref>
                </session>
                <session>
                    <ejb-name>OrderAuditSes</ejb-name>
			        <jndi-name>ejb/OrderAuditSes</jndi-name>
			        <resource-ref>
			        	<!-- <res-ref-name>OrdersDataSource</res-ref-name>
			        	<jndi-name>jdbc/SPEC</jndi-name> -->
			        	<ref-name>jdbc/SPEC</ref-name>
                		<resource-link>OrdersDataSource</resource-link>
			      </resource-ref>
                </session>
                <session>
                    <ejb-name>ItemBrowserSes</ejb-name>
			        <jndi-name>ejb/ItemBrowserSes</jndi-name>
                </session>
                <message-driven>
                    <ejb-name>FulfillOrderMDB</ejb-name>
                    <resource-adapter>
                        <resource-link>SPECJMSResources</resource-link>
                    </resource-adapter>
                    <activation-config>
                        <activation-config-property>
                            <activation-config-property-name>destinationType</activation-config-property-name>
                            <activation-config-property-value>javax.jms.Queue</activation-config-property-value>
                        </activation-config-property>
                        <activation-config-property>
                            <activation-config-property-name>destination</activation-config-property-name>
                            <activation-config-property-value>FulfillOrderQueue</activation-config-property-value>
                        </activation-config-property>
                    </activation-config>
                </message-driven>
                <entity>
					<ejb-name>OrderLineEnt</ejb-name>
					<table-name>O_ORDERLINE</table-name>
					<cmp-field-mapping>
						<cmp-field-name>id</cmp-field-name>
						<table-column>OL_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>totalValue</cmp-field-name>
						<table-column>OL_TOTAL_VALUE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>itemId</cmp-field-name>
						<table-column>OL_I_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>orderId</cmp-field-name>
						<table-column>OL_O_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>quantity</cmp-field-name>
						<table-column>OL_QTY</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>shipDate</cmp-field-name>
						<table-column>OL_SHIP_DATE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>olineStatus</cmp-field-name>
						<table-column>OL_STATUS</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>msrpAtPurchase</cmp-field-name>
						<table-column>OL_MSRP</table-column>
					</cmp-field-mapping>
                </entity>

                <entity>
					<ejb-name>OrderEnt</ejb-name>
					<table-name>O_ORDERS</table-name>
					<cmp-field-mapping>
						<cmp-field-name>id</cmp-field-name>
						<table-column>O_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>discount</cmp-field-name>
						<table-column>O_DISCOUNT</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>orderLineCount</cmp-field-name>
						<table-column>O_OL_CNT</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>customerId</cmp-field-name>
						<table-column>O_C_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>total</cmp-field-name>
						<table-column>O_TOTAL</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>entryDate</cmp-field-name>
						<table-column>O_ENTRY_DATE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>orderStatus</cmp-field-name>
						<table-column>O_STATUS</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>shipDate</cmp-field-name>
						<table-column>O_SHIP_DATE</table-column>
					</cmp-field-mapping>
                </entity>

                <entity>
					<ejb-name>ItemEnt</ejb-name>
					<table-name>O_ITEM</table-name>
					<cmp-field-mapping>
						<cmp-field-name>discount</cmp-field-name>
						<table-column>I_DISCOUNT</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>name</cmp-field-name>
						<table-column>I_NAME</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>id</cmp-field-name>
						<table-column>I_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>description</cmp-field-name>
						<table-column>I_DESC</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>price</cmp-field-name>
						<table-column>I_PRICE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>category</cmp-field-name>
						<table-column>I_CATEGORY</table-column>
					</cmp-field-mapping>	
                </entity>	
            </enterprise-beans>
            <relationships>
                <ejb-relation>
                    <ejb-relation-name>Order-OrderLine</ejb-relation-name>
                    <ejb-relationship-role>
                        <ejb-relationship-role-name>Order-has-many-OrderLine</ejb-relationship-role-name>
                        <relationship-role-source>
                            <ejb-name>OrderEnt</ejb-name>
                        </relationship-role-source>
                        <cmr-field>
                            <cmr-field-name>ordLines</cmr-field-name>
                        </cmr-field>
                        <role-mapping>
                            <cmr-field-mapping>
                                <key-column>O_ID</key-column>
                                <foreign-key-column>OL_O_ID</foreign-key-column>
                            </cmr-field-mapping>
                        </role-mapping>
                    </ejb-relationship-role>
                </ejb-relation>    
            </relationships>
        </openejb-jar>
    </module>
    
    <module>
        <ejb>mfg.jar</ejb>
        <openejb-jar xmlns="http://www.openejb.org/xml/ns/openejb-jar"
            configId="MFGEJB" parentId="SPECjAppServer">
            <cmp-connection-factory>
                <resource-link>SPEC</resource-link>
            </cmp-connection-factory>
            <enterprise-beans>
                <session>
                    <ejb-name>WorkOrderSes</ejb-name>
                    <jndi-name>ejb/WorkOrderSes</jndi-name>
                </session>
                <session>
                    <ejb-name>MfgAuditSes</ejb-name>
			        <jndi-name>ejb/MfgAuditSes</jndi-name>
			        <resource-ref>
			        	<!--<res-ref-name>MfgDataSource</res-ref-name>
			        	<jndi-name>jdbc/SPEC</jndi-name>-->
			        	<ref-name>jdbc/SPEC</ref-name>
                		<resource-link>MfgDataSource</resource-link>
			        </resource-ref>
			        <resource-ref>
			        	<!--<res-ref-name>OrdersDataSource</res-ref-name>
			        	<jndi-name>jdbc/SPEC</jndi-name>-->
			        	<ref-name>jdbc/SPEC</ref-name>
                		<resource-link>OrdersDataSource</resource-link>
			      </resource-ref>
                </session>
                <session>
                    <ejb-name>LargeOrderSes</ejb-name>
			        <jndi-name>ejb/LargeOrderSes</jndi-name>
                </session>
                <message-driven>
                    <ejb-name>ReceiveMDB</ejb-name>
                    <resource-adapter>
                        <resource-link>SPECJMSResources</resource-link>
                    </resource-adapter>
                    <activation-config>
                        <activation-config-property>
                            <activation-config-property-name>destinationType</activation-config-property-name>
                            <activation-config-property-value>javax.jms.Queue</activation-config-property-value>
                        </activation-config-property>
                        <activation-config-property>
                            <activation-config-property-name>destination</activation-config-property-name>
                            <activation-config-property-value>ReceiveQueue</activation-config-property-value>
                        </activation-config-property>
                    </activation-config>
                </message-driven>
                <message-driven>
                    <ejb-name>LargeOrderMDB</ejb-name>
                    <resource-adapter>
                        <resource-link>SPECJMSResources</resource-link>
                    </resource-adapter>
                    <activation-config>
                        <activation-config-property>
                            <activation-config-property-name>destinationType</activation-config-property-name>
                            <activation-config-property-value>javax.jms.Queue</activation-config-property-value>
                        </activation-config-property>
                        <activation-config-property>
                            <activation-config-property-name>destination</activation-config-property-name>
                            <activation-config-property-value>LargeOrderQueue</activation-config-property-value>
                        </activation-config-property>
                    </activation-config>
                </message-driven>
                <entity>
					<ejb-name>PartEnt</ejb-name>
					<table-name>M_PARTS</table-name>
					<cmp-field-mapping>
						<cmp-field-name>planner</cmp-field-name>
						<table-column>P_PLANNER</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>description</cmp-field-name>
						<table-column>P_DESC</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>himark</cmp-field-name>
						<table-column>P_HIMARK</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>lomark</cmp-field-name>
						<table-column>P_LOMARK</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>purchased</cmp-field-name>
						<table-column>P_IND</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>name</cmp-field-name>
						<table-column>P_NAME</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>type</cmp-field-name>
						<table-column>P_TYPE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>revision</cmp-field-name>
						<table-column>P_REV</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>id</cmp-field-name>
						<table-column>P_ID</table-column>
					</cmp-field-mapping>
                </entity>
                <entity>
					<ejb-name>BomEnt</ejb-name>
					<table-name>M_BOM</table-name>
					<cmp-field-mapping>
						<cmp-field-name>qty</cmp-field-name>
						<table-column>B_QTY</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>componentId</cmp-field-name>
						<table-column>B_COMP_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>assemblyId</cmp-field-name>
						<table-column>B_ASSEMBLY_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>lineNo</cmp-field-name>
						<table-column>B_LINE_NO</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>engChange</cmp-field-name>
						<table-column>B_ENG_CHANGE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>opsNo</cmp-field-name>
						<table-column>B_OPS</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>opsDesc</cmp-field-name>
						<table-column>B_OPS_DESC</table-column>
					</cmp-field-mapping>
                </entity>
                <entity>
					<ejb-name>WorkOrderEnt</ejb-name>
					<table-name>M_WORKORDER</table-name>
					<cmp-field-mapping>
						<cmp-field-name>startDate</cmp-field-name>
						<table-column>WO_START_DATE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>compQty</cmp-field-name>
						<table-column>WO_COMP_QTY</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>assemblyId</cmp-field-name>
						<table-column>WO_ASSEMBLY_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>dueDate</cmp-field-name>
						<table-column>WO_DUE_DATE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>origQty</cmp-field-name>
						<table-column>WO_ORIG_QTY</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>status</cmp-field-name>
						<table-column>WO_STATUS</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>salesId</cmp-field-name>
						<table-column>WO_O_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>id</cmp-field-name>
						<table-column>WO_NUMBER</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>oLineId</cmp-field-name>
						<table-column>WO_OL_ID</table-column>
					</cmp-field-mapping>
					<resource-ref>
                       <ref-name>jms/QueueConnectionFactory</ref-name>
                       <resource-link>SPECConnectionFactory</resource-link>
                    </resource-ref>
					<resource-env-ref>
                       <ref-name>jms/FulfillOrderQueue</ref-name>
                       <message-destination-link>FulfillOrderQueue</message-destination-link>
                    </resource-env-ref>
                    <resource-env-ref>
                       <ref-name>jms/BuyerQueue</ref-name>
                       <message-destination-link>BuyerQueue</message-destination-link>
                    </resource-env-ref>	
                </entity>
                <entity>
					<ejb-name>ComponentEnt</ejb-name>
					<table-name>M_PARTS</table-name>
					<cmp-field-mapping>
						<cmp-field-name>description</cmp-field-name>
						<table-column>P_DESC</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>himark</cmp-field-name>
						<table-column>P_HIMARK</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>id</cmp-field-name>
						<table-column>P_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>lomark</cmp-field-name>
						<table-column>P_LOMARK</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>name</cmp-field-name>
						<table-column>P_NAME</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>planner</cmp-field-name>
						<table-column>P_PLANNER</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>purchased</cmp-field-name>
						<table-column>P_IND</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>revision</cmp-field-name>
						<table-column>P_REV</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>type</cmp-field-name>
						<table-column>P_TYPE</table-column>
					</cmp-field-mapping>
                </entity>
                <entity>
					<ejb-name>InventoryEnt</ejb-name>
					<table-name>M_INVENTORY</table-name>
					<cmp-field-mapping>
						<cmp-field-name>partId</cmp-field-name>
						<table-column>IN_P_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>in_ordered</cmp-field-name>
						<table-column>IN_ORDERED</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>location</cmp-field-name>
						<table-column>IN_LOCATION</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>qty</cmp-field-name>
						<table-column>IN_QTY</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>accDate</cmp-field-name>
						<table-column>IN_ACT_DATE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>accCode</cmp-field-name>
						<table-column>IN_ACC_CODE</table-column>
					</cmp-field-mapping>
                </entity>
                <entity>
					<ejb-name>AssemblyEnt</ejb-name>
					<table-name>M_PARTS</table-name>
					<cmp-field-mapping>
						<cmp-field-name>name</cmp-field-name>
						<table-column>P_NAME</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>id</cmp-field-name>
						<table-column>P_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>planner</cmp-field-name>
						<table-column>P_PLANNER</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>lomark</cmp-field-name>
						<table-column>P_LOMARK</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>purchased</cmp-field-name>
						<table-column>P_IND</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>revision</cmp-field-name>
						<table-column>P_REV</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>himark</cmp-field-name>
						<table-column>P_HIMARK</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>type</cmp-field-name>
						<table-column>P_TYPE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>description</cmp-field-name>
						<table-column>P_DESC</table-column>
					</cmp-field-mapping>
                </entity>
                <entity>
					<ejb-name>LargeOrderEnt</ejb-name>
					<table-name>M_LARGEORDER</table-name>
					<cmp-field-mapping>
						<cmp-field-name>salesOrderId</cmp-field-name>
						<table-column>LO_O_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>id</cmp-field-name>
						<table-column>LO_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>assemblyId</cmp-field-name>
						<table-column>LO_ASSEMBLY_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>qty</cmp-field-name>
						<table-column>LO_QTY</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>dueDate</cmp-field-name>
						<table-column>LO_DUE_DATE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>orderLineNumber</cmp-field-name>
						<table-column>LO_OL_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>category</cmp-field-name>
						<table-column>LO_CATEGORY</table-column>
					</cmp-field-mapping>
                </entity>	
            </enterprise-beans>
            <relationships>
                <ejb-relation>
                    <ejb-relation-name>Bom-Component</ejb-relation-name>
                    <ejb-relationship-role>
                        <ejb-relationship-role-name>Bom-has-a-Component</ejb-relationship-role-name>
                        <relationship-role-source>
                            <ejb-name>BomEnt</ejb-name>
                        </relationship-role-source>
                        <cmr-field>
                            <cmr-field-name>component</cmr-field-name>
                        </cmr-field>
                        <foreign-key-column-on-source/>
                        <role-mapping>
                            <cmr-field-mapping>
                                <key-column>P_ID</key-column>
                                <foreign-key-column>B_COMP_ID</foreign-key-column>
                            </cmr-field-mapping>
                        </role-mapping>
                    </ejb-relationship-role>
                </ejb-relation>    
                <ejb-relation>
                    <ejb-relation-name>AssemblyEnt-BomEnt</ejb-relation-name>
                    <ejb-relationship-role>
                        <ejb-relationship-role-name>BOM-has-a-Assembly</ejb-relationship-role-name>
                        <relationship-role-source>
                            <ejb-name>BomEnt</ejb-name>
                        </relationship-role-source>
                        <cmr-field>
                            <cmr-field-name>assembly</cmr-field-name>
                        </cmr-field>
                        <foreign-key-column-on-source/>
                        <role-mapping>
                            <cmr-field-mapping>
                                <key-column>P_ID</key-column>
                                <foreign-key-column>B_ASSEMBLY_ID</foreign-key-column>
                            </cmr-field-mapping>
                        </role-mapping>
                    </ejb-relationship-role>
                    <ejb-relationship-role>
                        <ejb-relationship-role-name>Assembly-has-BOMs</ejb-relationship-role-name>
                        <relationship-role-source>
                            <ejb-name>AsssemblyEnt</ejb-name>
                        </relationship-role-source>
                        <cmr-field>
                            <cmr-field-name>bOMs</cmr-field-name>
                        </cmr-field>
                        <foreign-key-column-on-source/>
                        <role-mapping>
                            <cmr-field-mapping>
                                <key-column>P_ID</key-column>
                                <foreign-key-column>B_ASSEMBLY_ID</foreign-key-column>
                            </cmr-field-mapping>
                        </role-mapping>
                    </ejb-relationship-role>
                </ejb-relation>    
                <ejb-relation>
                    <ejb-relation-name>WorkOrder-Assembly</ejb-relation-name>
                    <ejb-relationship-role>
                        <ejb-relationship-role-name>WorkOrder-has-a-Assembly</ejb-relationship-role-name>
                        <relationship-role-source>
                            <ejb-name>WorkOrderEnt</ejb-name>
                        </relationship-role-source>
                        <cmr-field>
                            <cmr-field-name>assembly</cmr-field-name>
                        </cmr-field>
                        <foreign-key-column-on-source/>
                        <role-mapping>
                            <cmr-field-mapping>
                                <key-column>P_ID</key-column>
                                <foreign-key-column>WO_ASSEMBLY_ID</foreign-key-column>
                            </cmr-field-mapping>
                        </role-mapping>
                    </ejb-relationship-role>
                </ejb-relation>    
                <ejb-relation>
                    <ejb-relation-name>Component-Inventory</ejb-relation-name>
                        <ejb-relationship-role>
                            <ejb-relationship-role-name>Component-has-a-Inventory</ejb-relationship-role-name>
                        <relationship-role-source>
                            <ejb-name>ComponentEnt</ejb-name>
                        </relationship-role-source>
                        <cmr-field>
                            <cmr-field-name>inventory</cmr-field-name>
                        </cmr-field>
                        <role-mapping>
                            <cmr-field-mapping>
                                <key-column>P_ID</key-column>
                                <foreign-key-column>IN_P_ID</foreign-key-column>
                            </cmr-field-mapping>
                        </role-mapping>
                    </ejb-relationship-role>
                </ejb-relation>    
                <ejb-relation>
                    <ejb-relation-name>Assembly-Inventory</ejb-relation-name>
                    <ejb-relationship-role>
                        <ejb-relationship-role-name>Assembly-has-a-Inventory</ejb-relationship-role-name>
                        <relationship-role-source>
                            <ejb-name>AssemblyEnt</ejb-name>
                        </relationship-role-source>
                        <cmr-field>
                            <cmr-field-name>inventory</cmr-field-name>
                        </cmr-field>
                        <role-mapping>
                            <cmr-field-mapping>
                                <key-column>P_ID</key-column>
                                <foreign-key-column>IN_P_ID</foreign-key-column>
                            </cmr-field-mapping>
                        </role-mapping>
                    </ejb-relationship-role>
                </ejb-relation>    
            </relationships>
        </openejb-jar>
    </module> 
    
    <module>
        <ejb>supplier.jar</ejb>
        <openejb-jar xmlns="http://www.openejb.org/xml/ns/openejb-jar"
            configId="SUPPLIEREJB" parentId="SPECjAppServer">
            <cmp-connection-factory>
                <resource-link>SPEC</resource-link>
            </cmp-connection-factory>
            <enterprise-beans>
                <session>
                    <ejb-name>SupplierAuditSes</ejb-name>
                    <jndi-name>ejb/SupplierAuditSes</jndi-name>
					<resource-ref>
						<!--<res-ref-name>SupplierDataSource</res-ref-name>
						<jndi-name>jdbc/SPEC</jndi-name>-->
						<ref-name>jdbc/SPEC</ref-name>
                		<resource-link>SupplierDataSource</resource-link>
					</resource-ref>
                </session>
                <session>
                    <ejb-name>ReceiverSes</ejb-name>
			        <jndi-name>ejb/ReceiverSes</jndi-name>
			        <resource-ref>
                       <ref-name>jms/QueueConnectionFactory</ref-name>
                       <resource-link>SPECConnectionFactory</resource-link>
                    </resource-ref>
					<resource-env-ref>
                       <ref-name>jms/ReceiveQueue</ref-name>
                       <message-destination-link>ReceiveQueue</message-destination-link>
                    </resource-env-ref>
                </session>
                <message-driven>
                    <ejb-name>BuyerMDB</ejb-name>
                    <resource-adapter>
                        <resource-link>SPECJMSResources</resource-link>
                    </resource-adapter>
                    <activation-config>
                        <activation-config-property>
                            <activation-config-property-name>destinationType</activation-config-property-name>
                            <activation-config-property-value>javax.jms.Queue</activation-config-property-value>
                        </activation-config-property>
                        <activation-config-property>
                            <activation-config-property-name>destination</activation-config-property-name>
                            <activation-config-property-value>BuyerQueue</activation-config-property-value>
                        </activation-config-property>
                    </activation-config>
                </message-driven>
                <entity>
					<ejb-name>SupplierEnt</ejb-name>
					<table-name>S_SUPPLIER</table-name>
					<cmp-field-mapping>
						<cmp-field-name>suppPhone</cmp-field-name>
						<table-column>SUPP_PHONE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>suppState</cmp-field-name>
						<table-column>SUPP_STATE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>suppID</cmp-field-name>
						<table-column>SUPP_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>suppName</cmp-field-name>
						<table-column>SUPP_NAME</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>suppZip</cmp-field-name>
						<table-column>SUPP_ZIP</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>suppStreet1</cmp-field-name>
						<table-column>SUPP_STREET1</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>suppCountry</cmp-field-name>
						<table-column>SUPP_COUNTRY</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>suppCity</cmp-field-name>
						<table-column>SUPP_CITY</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>suppContact</cmp-field-name>
						<table-column>SUPP_CONTACT</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>suppStreet2</cmp-field-name>
						<table-column>SUPP_STREET2</table-column>
					</cmp-field-mapping>
                </entity>
                <entity>
					<ejb-name>POLineEnt</ejb-name>
					<table-name>S_PURCHASE_ORDERLINE</table-name>
					<cmp-field-mapping>
						<cmp-field-name>poLineBalance</cmp-field-name>
						<table-column>POL_BALANCE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
					<cmp-field-name>poLineQty</cmp-field-name>
						<table-column>POL_QTY</table-column>
						</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>poLineID</cmp-field-name>
						<table-column>POL_P_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>poLineMsg</cmp-field-name>
						<table-column>POL_MESSAGE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>poLinePoID</cmp-field-name>
						<table-column>POL_PO_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>poLineNumber</cmp-field-name>
						<table-column>POL_NUMBER</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>poLineDelDate</cmp-field-name>
						<table-column>POL_DELDATE</table-column>
					</cmp-field-mapping>
                </entity>
                <entity>
					<ejb-name>POEnt</ejb-name>
					<table-name>S_PURCHASE_ORDER</table-name>
					<cmp-field-mapping>
						<cmp-field-name>poSiteID</cmp-field-name>
						<table-column>PO_SITE_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>poNumber</cmp-field-name>
						<table-column>PO_NUMBER</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>poSuppID</cmp-field-name>
						<table-column>PO_SUPP_ID</table-column>
					</cmp-field-mapping>	
                </entity>
                <entity>
					<ejb-name>SupplierCompEnt</ejb-name>
					<table-name>S_SUPP_COMPONENT</table-name>
					<cmp-field-mapping>
						<cmp-field-name>suppCompDelDate</cmp-field-name>
						<table-column>SC_DEL_DATE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>suppCompQty</cmp-field-name>
						<table-column>SC_QTY</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>suppCompID</cmp-field-name>
						<table-column>SC_P_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>suppCompPrice</cmp-field-name>
						<table-column>SC_PRICE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>suppCompSuppID</cmp-field-name>
						<table-column>SC_SUPP_ID</table-column>
					</cmp-field-mapping>
						<cmp-field-mapping>
						<cmp-field-name>suppCompDiscount</cmp-field-name>
					<table-column>SC_DISCOUNT</table-column>
					</cmp-field-mapping>
                </entity>
                <entity>
					<ejb-name>SComponentEnt</ejb-name>
					<table-name>S_COMPONENT</table-name>
					<cmp-field-mapping>
						<cmp-field-name>compUnit</cmp-field-name>
						<table-column>COMP_UNIT</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>leadTime</cmp-field-name>
						<table-column>LEAD_TIME</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>qtyOnOrder</cmp-field-name>
						<table-column>QTY_ON_ORDER</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>compID</cmp-field-name>
						<table-column>COMP_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>compName</cmp-field-name>
						<table-column>COMP_NAME</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>compCost</cmp-field-name>
						<table-column>COMP_COST</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>containerSize</cmp-field-name>
						<table-column>CONTAINER_SIZE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>qtyDemanded</cmp-field-name>
						<table-column>QTY_DEMANDED</table-column>
					</cmp-field-mapping>
						<cmp-field-mapping>
						<cmp-field-name>compDesc</cmp-field-name>
					<table-column>COMP_DESC</table-column>
					</cmp-field-mapping>
                </entity>	
            </enterprise-beans>
            <relationships>
                <ejb-relation>
                    <ejb-relation-name>Po-PoLine</ejb-relation-name>
                    <ejb-relationship-role>
                        <ejb-relationship-role-name>Po-has-many-PoLine</ejb-relationship-role-name>
                        <relationship-role-source>
                            <ejb-name>POEnt</ejb-name>
                        </relationship-role-source>
                        <cmr-field>
                            <cmr-field-name>poLines</cmr-field-name>
                        </cmr-field>
                        <role-mapping>
                            <cmr-field-mapping>
                                <key-column>PO_NUMBER</key-column>
                                <foreign-key-column>POL_PO_ID</foreign-key-column>
                            </cmr-field-mapping>
                        </role-mapping>
                    </ejb-relationship-role>
                </ejb-relation>    
            </relationships>
        </openejb-jar>
    </module> 
    
    <module>
        <ejb>util.jar</ejb>
        <openejb-jar xmlns="http://www.openejb.org/xml/ns/openejb-jar"
            configId="UTILEJB" parentId="SPECjAppServer">
            <cmp-connection-factory>
                <resource-link>SPEC</resource-link>
            </cmp-connection-factory>
            <enterprise-beans>
                <session>
                    <ejb-name>SequenceSes</ejb-name>
			        <jndi-name>ejb/SequenceSes</jndi-name>
                </session>
                <entity>
					<ejb-name>SequenceEnt</ejb-name>
					<table-name>U_SEQUENCES</table-name>
					<cmp-field-mapping>
						<cmp-field-name>id</cmp-field-name>
						<table-column>S_ID</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>blockSize</cmp-field-name>
						<table-column>S_BLOCKSIZE</table-column>
					</cmp-field-mapping>
					<cmp-field-mapping>
						<cmp-field-name>nextNumber</cmp-field-name>
						<table-column>S_NEXTNUM</table-column>
					</cmp-field-mapping>
                </entity>	
            </enterprise-beans>
        </openejb-jar>
    </module>  
</application>
